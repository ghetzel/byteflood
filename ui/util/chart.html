<div class="card">
    <div class="card-block">
        {{ $chart_id := replace uuid "-" "" -1 }}
        <div class="chart" id="chart_{{ $chart_id }}"></div>
        <script type="text/javascript">
        $(document).ready(function(){
            $.ajax('/api/metrics/query/byteflood.api.requests?interval=5m&from=-100h&format=csv', {
                success: function(data){
                    var xData = [];
                    var yData = [];

                    $.each(data.split("\n"), function(i, row){
                        var parts = row.split("\t");

                        xData.push(new Date(parseInt(parts[1])));
                        yData.push(parseFloat(parts[2]));
                    });

                    Plotly.newPlot('chart_{{ $chart_id }}', [{
                        x:    xData,
                        y:    yData,
                        type: 'scatter',
                    }]);
                },
            });
        });
        </script>
    </div>
</div>
